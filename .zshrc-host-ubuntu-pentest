# add source .zshrc-host-ubuntu-pentest to .zshrc

alias webui-run='sudo docker compose -f /home/hboissel/webui/docker-compose.yml up'
alias webui-clear='sh /home/hboissel/webui/clear.sh'


HISTSIZE=50
SAVEHIST=50

# Created by `pipx` on 2025-01-08 08:01:18
export PATH="$PATH:/home/hboissel/.local/bin"


# Veracrypt alias
VERACRYPT_BASE_PATH="/home/hboissel/AUDIT/"
# Define colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color


vc-create() {

    if [ $# -ne 2 ]; then
        echo -e "${YELLOW}Usage: vc-create <container_name> <size>${NC}"
        return 1
    fi

    CONTAINER_NAME="$1"
    SIZE="$2"
    
    veracrypt --text --create "${VERACRYPT_BASE_PATH}container/${CONTAINER_NAME}.vc" \
        --size ${SIZE} \
        --volume-type normal \
        --encryption AES \
        --hash sha-512 \
        --filesystem fat \
        --pim 0 \
        --keyfiles "" \
        --random-source=/dev/urandom

    if [ $? -eq 0 ]; then
        echo -e "${GREEN}[+] VeraCrypt container created: ${VERACRYPT_BASE_PATH}container/${CONTAINER_NAME}.vc${NC}"
        echo -e "${GREEN}[+] Container password: ${PASS}${NC}"
    else
        echo -e "${RED}[-] Error: Failed to create VeraCrypt container${NC}"
        return 1
    fi
}

vc-mount() {

    if [ $# -ne 1 ]; then
        echo -e "${YELLOW}Usage: vc-mount <container_name>${NC}"
        return 1
    fi

    CONTAINER_NAME="$1"

    mkdir "${VERACRYPT_BASE_PATH}${CONTAINER_NAME}"

    if veracrypt --text --mount \
        "${VERACRYPT_BASE_PATH}container/${CONTAINER_NAME}.vc" \
        "${VERACRYPT_BASE_PATH}${CONTAINER_NAME}" \
        --pim 0 \
        --keyfiles "" \
        --protect-hidden no \
        --verbose; then
        echo -e "${GREEN}[+] VeraCrypt container mounted: ${VERACRYPT_BASE_PATH}${CONTAINER_NAME}${NC}"
    else
        echo -e "${RED}[-] Error: Failed to mount container${NC}"
        return 1
    fi
}

vc-umount() {

    if [ $# -ne 1 ]; then
        echo -e "${YELLOW}Usage: vc-umount <container_name>${NC}"
        return 1
    fi

    CONTAINER_NAME="$1"

    if veracrypt --text --dismount "${VERACRYPT_BASE_PATH}${CONTAINER_NAME}"; then
        echo -e "${GREEN}[+] VeraCrypt container unmounted: ${VERACRYPT_BASE_PATH}${CONTAINER_NAME}${NC}"
        
        rmdir "${VERACRYPT_BASE_PATH}${CONTAINER_NAME}" 2>/dev/null || true
    else
        echo -e "${RED}[-] Error: Failed to unmount container${NC}"
        return 1
    fi
}
